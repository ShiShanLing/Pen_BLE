<!--pages/DeviceDetails.wxml-->
<view class="container">
  <scroll-view class="scroll" scroll-y>
    <view class="showPencilItem" >
      <view class="{{deviceInfo.isConnection?'content connected':'content'}}">
        <van-row>
          <div class="pen-info-box">
            <image wx:if="{{deviceInfo.isConnection}}" class="pen-icon" src="../../images/pencil-lan.png"></image>
            <image wx:if="{{!deviceInfo.isConnection}}" class="pen-icon icon-dark" src="../../images/pencil-hui.png"></image>
            <label class="pen-name" style="color: {{deviceInfo.isConnection?'#1989fa':'rgb(31, 31, 31)'}};">{{deviceInfo.name}}</label>

            <view class="pen-connect-state-box">
              <label class="text">{{deviceInfo.isConnection ? "YES":"NO"}}</label>
              <van-switch class="switch" data-connection='{{deviceInfo.isConnection}}' data-devId='{{deviceInfo.deviceId}}' catch:tap="onClickSwitchBLEState" checked="{{deviceInfo.isConnection}}" size="20px" />
            </view>
          </div>
          <!-- pen-connect-state-box -->
        </van-row>
        <van-row>
          <view class="pen-sydl-box">
            <image class="pen-sydl-state" src="{{deviceInfo.battery.length?'../../images/dl.png':'../../images/dl-hui.png'}}"></image>
            <text class="pen-sydl-text">{{deviceInfo.battery.length?item.battery:"--%"}} {{item.chargingState.length?item.chargingState:"未充电"}}</text>
            <text class="isConnect-tag">{{deviceInfo.isConnection ? "已连接":"未连接"}}</text>
          </view>
        </van-row>
        <van-cell class="nib-strength-adjust" value="{{nibStrength}}" title="笔尖信号强度调节" is-link />
      </view>
    </view>

    <view wx:if="{{deviceInfo.isConnection}}" class="item-box">
      <view class="pen-content func-change-content">
        <van-cell-group title="按键-上" title-class="van-cell-title">
          <van-cell title="单按" value="内容" is-link data-tag='1.1' bind:tap="onShowPicker" />
          <van-cell title="双按" value="内容" is-link data-tag='1.2' bind:tap="onShowPicker" />
          <van-cell title="长按" value="内容" is-link data-tag='1.3' bind:tap="onShowPicker" />
        </van-cell-group>
      </view>
    </view>
    <view wx:if="{{deviceInfo.isConnection}}" class="item-box">
      <view class="pen-content func-change-content">
        <van-cell-group title="按键-下" title-class="van-cell-title">
          <van-cell title="单按" value="内容" is-link data-tag='2.1' bind:tap="onShowPicker" />
          <van-cell title="双按" value="内容" is-link data-tag='2.2' bind:tap="onShowPicker" />
          <van-cell title="长按" value="内容" is-link data-tag='2.3' bind:tap="onShowPicker" />
        </van-cell-group>
      </view>
    </view>
  </scroll-view>
  <van-popup class="selectPicker" show="{{ isShowPicker }}" position="bottom" round bind:close="onPickerClose">
    <van-picker title='{{pickerTitle}}' columns="{{ funcList }}" bind:change="onPickerChange" show-toolbar />
  </van-popup>>
</view>
<!-- <view hidden="isShowPicker" class="isShowPicker?'':selectPicker"></view> -->